# 📢 구글 애드센스 적용 가이드

## 🎯 우리가 선택한 방식: REST API + 직접 렌더링

**장점:**
- ✅ 애드센스를 **원하는 위치에 정확히 삽입** 가능
- ✅ 링크 이탈 방지 (외부 링크만 새 탭)
- ✅ 디자인 완전 제어
- ✅ 수익 최적화 가능

---

## 📁 적용된 파일

### 1. `post-detail.html` (포스트 상세 페이지)
- 워드프레스 글을 가져와서 예쁘게 표시
- **글 중간에 자동으로 애드센스 삽입**
- 외부 링크는 새 탭에서 열림 (사이트 이탈 방지)

### 2. 모든 `sub-*.html` + `news-main.html` (48개 파일)
- 워드프레스 글 목록을 자동으로 가져옴
- 클릭 시 `post-detail.html`로 연결
- 2열 그리드 레이아웃 (모바일 1열)

---

## 🔧 구글 애드센스 적용 방법

### 1단계: 구글 애드센스 코드 받기

1. [Google AdSense](https://www.google.com/adsense) 로그인
2. **광고 > 광고 단위 > 디스플레이 광고** 생성
3. 생성된 코드 복사:

```html
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
     data-ad-slot="XXXXXXXXXX"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
```

---

### 2단계: `post-detail.html`에 애드센스 코드 삽입

`post-detail.html` 파일을 열고 **192번째 줄** 근처를 찾으세요:

**찾아야 할 부분:**
```html
<div class="adsense-container">
    <!-- 구글 애드센스 코드를 여기에 삽입 -->
    <div class="adsense-placeholder">
        📢 광고 영역<br>
        <small>구글 애드센스 코드를 삽입하세요</small>
    </div>
    
    <!-- 실제 애드센스 코드 예시: -->
```

**변경 후:**
```html
<div class="adsense-container">
    <!-- 구글 애드센스 코드 -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
         data-ad-slot="XXXXXXXXXX"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
```

---

### 3단계: 애드센스 헤더 스크립트 추가

`post-detail.html`의 `<head>` 섹션에 애드센스 스크립트를 추가하세요:

**`<head>` 안에 추가:**
```html
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="post-title">로딩 중... - 9988 건강정보</title>
    
    <!-- 구글 애드센스 스크립트 -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
            crossorigin="anonymous"></script>
    
    <style>
        ...
```

**❗ 중요:** `ca-pub-XXXXXXXXXXXXXXXX` 부분을 본인의 애드센스 게시자 ID로 교체하세요!

---

## 📍 애드센스 삽입 위치 커스터마이징

### 현재 설정 (기본값)
- 글 중간 (전체 문단의 50% 지점)에 1개 삽입

### 삽입 위치 변경하기

`post-detail.html`의 **`processContent` 함수** 수정 (약 246번째 줄):

**현재 코드:**
```javascript
// 중간에 애드센스 삽입 (예: 3번째 문단 후)
const adIndex = Math.floor(paragraphs.length / 2);
```

**변경 옵션:**

#### 1) 글 시작 부분에 삽입
```javascript
const adIndex = 2;  // 2번째 문단 후
```

#### 2) 글 끝 부분에 삽입
```javascript
const adIndex = paragraphs.length - 2;  // 마지막에서 2번째 문단 후
```

#### 3) 여러 개 삽입 (3개)
```javascript
// 문단이 10개 이상일 때만 3개 삽입
if (paragraphs.length >= 10) {
    const ad1Index = Math.floor(paragraphs.length / 4);      // 25% 지점
    const ad2Index = Math.floor(paragraphs.length / 2);      // 50% 지점
    const ad3Index = Math.floor(paragraphs.length * 3 / 4);  // 75% 지점
    
    paragraphs.splice(ad3Index, 0, adsenseCode);  // 역순으로 삽입
    paragraphs.splice(ad2Index, 0, adsenseCode);
    paragraphs.splice(ad1Index, 0, adsenseCode);
}
```

---

## 🔗 링크 제어 설정

### 현재 동작
- **내부 링크** (health9988234.mycafe24.com): 같은 탭에서 열림
- **외부 링크**: 새 탭에서 열림 (사이트 이탈 방지)

### 코드 위치
`post-detail.html`의 **`makeLinksOpenInNewTab` 함수** (약 267번째 줄):

```javascript
function makeLinksOpenInNewTab() {
    const links = document.querySelectorAll('.post-content a');
    links.forEach(link => {
        // 외부 링크인 경우 새 탭에서 열기
        if (!link.href.includes('health9988234.mycafe24.com') && 
            !link.href.startsWith('#')) {
            link.setAttribute('target', '_blank');
            link.setAttribute('rel', 'noopener noreferrer');
        }
    });
}
```

**변경 옵션:**

#### 모든 링크를 새 탭에서 열기
```javascript
links.forEach(link => {
    link.setAttribute('target', '_blank');
    link.setAttribute('rel', 'noopener noreferrer');
});
```

---

## 📊 워드프레스 카테고리 매핑

각 페이지가 어떤 워드프레스 카테고리에서 글을 가져올지 설정합니다.

### 설정 파일
`sub-*.html` 및 `news-main.html` 각 파일의 스크립트 부분:

```javascript
const pageToCategory = {
    'news-main.html': 'health-news',      // 건강News
    'sub-고혈압.html': 'hypertension',    // 고혈압
    'sub-당뇨.html': 'diabetes',          // 당뇨
    'sub-고지혈증.html': 'hyperlipidemia',
    // ... 필요한 매핑 추가
};
```

### 워드프레스 카테고리 슬러그 확인 방법

1. 워드프레스 관리자 로그인
2. **글 > 카테고리**
3. 원하는 카테고리에 마우스 올리기
4. 브라우저 하단에 표시되는 URL 확인:
   ```
   https://health9988234.mycafe24.com/wp-admin/term.php?taxonomy=category&tag_ID=123&post_type=post
   ```
5. 또는 카테고리 편집 페이지에서 "슬러그" 필드 확인

### 매핑 추가 예시

`sub-고혈압.html`에서 "고혈압" 카테고리의 글을 가져오려면:

```javascript
const pageToCategory = {
    'sub-고혈압.html': 'hypertension',  // 워드프레스의 카테고리 슬러그
    // ...
};
```

---

## 🧪 테스트 방법

### 1. 로컬 테스트
1. `news-main.html` 열기
2. 워드프레스에서 글 목록이 자동으로 로드되는지 확인
3. 글 클릭 → `post-detail.html`로 이동
4. 글 본문이 예쁘게 표시되는지 확인
5. 중간에 애드센스 영역이 나타나는지 확인

### 2. 실제 적용 후 테스트
1. FTP로 모든 파일 업로드
2. 브라우저에서 사이트 접속
3. 개발자 도구 (F12) > Console 탭에서 에러 확인
4. 애드센스 광고가 표시되는지 확인 (승인 후 1~2시간 소요)

---

## ❓ FAQ

### Q1: 애드센스 광고가 안 보여요
**A:** 
- 애드센스 계정이 승인되었나요?
- 광고 코드에서 `ca-pub-XXXXXX` 부분을 본인 ID로 교체했나요?
- 승인 후 1~2시간 기다려보세요
- 개발자 도구에서 에러 메시지 확인

### Q2: 글이 안 불러와져요
**A:**
- 워드프레스 REST API가 활성화되어 있나요?
- 워드프레스 > 설정 > 고유주소 > 글 이름 선택 후 저장
- 개발자 도구 > Network 탭에서 API 호출 확인

### Q3: 썸네일 이미지가 안 나와요
**A:**
- 워드프레스 글에 대표 이미지를 설정했나요?
- 이미지 URL이 올바른지 확인

### Q4: 링크를 클릭하면 사이트를 벗어나요
**A:**
- `makeLinksOpenInNewTab()` 함수가 제대로 실행되는지 확인
- 외부 링크는 의도적으로 새 탭에서 열리도록 설정됨

---

## 🎨 디자인 커스터마이징

### 글 폰트 크기 변경
`post-detail.html`의 CSS:

```css
.post-content {
    font-size: 17px;  /* 기본값 */
}
```

### 색상 테마 변경
```css
/* 헤더 그라데이션 */
.main-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* 링크 색상 */
.post-content a {
    color: #667eea;
}
```

---

## 📤 FTP 업로드

**업로드해야 할 파일:**
1. `post-detail.html` (새 파일)
2. `news-main.html` (업데이트)
3. 모든 `sub-*.html` (47개 파일, 업데이트)

**업로드 위치:**
- `/www/` (또는 `/public_html/`)

---

## 🚀 완료!

이제 준비가 끝났습니다! 

**확인사항:**
- ✅ 워드프레스에서 글 자동 로딩
- ✅ 예쁜 2열 그리드 레이아웃
- ✅ 애드센스 자동 삽입
- ✅ 링크 제어 (사이트 이탈 방지)
- ✅ 모바일 최적화

**질문이 있으시면 언제든지 물어보세요!** 😊

